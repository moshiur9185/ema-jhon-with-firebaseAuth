{"ast":null,"code":"var _jsxFileName = \"/home/moshiur/Desktop/Web Development/projects/ema-john-router/src/componets/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport firebase from 'firebase/app';\nimport \"firebase/auth\";\nimport firebaseConfig from './firebase.config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfirebase.initializeApp(firebaseConfig);\n\nconst Login = () => {\n  _s();\n\n  const [newUser, setNewUser] = useState(false);\n  const [user, setUser] = useState({\n    isSignedIn: false,\n    name: '',\n    email: '',\n    password: '',\n    photo: ''\n  });\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\n\n  const handleSignIn = () => {\n    firebase.auth().signInWithPopup(googleProvider).then(res => {\n      const {\n        displayName,\n        photoURL,\n        email\n      } = res.user;\n      const signedInUser = {\n        isSignedIn: true,\n        name: displayName,\n        email: email,\n        photo: photoURL\n      };\n      setUser(signedInUser);\n    }).catch(err => {\n      console.log(err);\n      console.log(err.message);\n    });\n  };\n\n  const handleFbSignIn = () => {\n    firebase.auth().signInWithPopup(fbProvider).then(function (result) {\n      var token = result.credential.accessToken;\n      var user = result.user;\n      console.log('fb user after sign in', user);\n    }).catch(function (error) {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      console.log(errorCode, errorMessage);\n    });\n  };\n\n  const handleSignOut = () => {\n    firebase.auth().signOut().then(res => {\n      const signedOutUser = {\n        isSignedIn: false,\n        name: '',\n        email: '',\n        photo: '',\n        error: '',\n        success: false\n      };\n      setUser(signedOutUser);\n    }).catch(err => {// An error happened.\n    });\n  };\n\n  const handleBlur = e => {\n    let isFieldValid = true;\n\n    if (e.target.name === 'email') {\n      isFieldValid = /\\S+@\\S+\\.\\S+/.test(e.target.value);\n    }\n\n    if (e.target.name === 'password') {\n      const isPasswordValid = e.target.value.length > 6;\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\n      isFieldValid = isPasswordValid && passwordHasNumber;\n    }\n\n    if (isFieldValid) {\n      const newUserInfo = { ...user\n      };\n      newUserInfo[e.target.name] = e.target.value;\n      setUser(newUserInfo);\n    }\n  };\n\n  const handleSubmit = e => {\n    if (newUser && user.email && user.password) {\n      firebase.auth().createUserWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        updateUserName(user.name);\n      }).catch(error => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n      });\n    }\n\n    if (!newUser && user.email && user.password) {\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        console.log('sign in user info', res.user);\n      }).catch(function (error) {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n      });\n    }\n\n    e.preventDefault();\n  };\n\n  const updateUserName = name => {\n    const user = firebase.auth().currentUser;\n    user.updateProfile({\n      displayName: name\n    }).then(function () {\n      console.log('user name updated successfully');\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [user.isSignedIn ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignOut,\n      children: \"Sign Out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignIn,\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleFbSignIn,\n      children: \"Sign in using Facebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), user.isSignedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome, \", user.name, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Your email: \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: user.photo,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 36\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Our own Authentication\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      onChange: () => setNewUser(!newUser),\n      name: \"newUser\",\n      id: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"newUser\",\n      children: \"New User Sign up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [newUser && /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"name\",\n        type: \"text\",\n        onBlur: handleBlur,\n        placeholder: \"Your name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        onBlur: handleBlur,\n        placeholder: \"Your Email address\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        onBlur: handleBlur,\n        placeholder: \"Your Password\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: newUser ? 'Sign up' : 'Sign in'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: user.error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), user.success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green'\n      },\n      children: [\"User \", newUser ? 'created' : 'Logged In', \" successfully\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"RlQo7xQbwWbnEJHsP+WmhA+RSkM=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/moshiur/Desktop/Web Development/projects/ema-john-router/src/componets/Login/Login.js"],"names":["React","useState","firebase","firebaseConfig","initializeApp","Login","newUser","setNewUser","user","setUser","isSignedIn","name","email","password","photo","googleProvider","auth","GoogleAuthProvider","fbProvider","FacebookAuthProvider","handleSignIn","signInWithPopup","then","res","displayName","photoURL","signedInUser","catch","err","console","log","message","handleFbSignIn","result","token","credential","accessToken","error","errorCode","code","errorMessage","handleSignOut","signOut","signedOutUser","success","handleBlur","e","isFieldValid","target","test","value","isPasswordValid","length","passwordHasNumber","newUserInfo","handleSubmit","createUserWithEmailAndPassword","updateUserName","signInWithEmailAndPassword","preventDefault","currentUser","updateProfile","color"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport firebase from 'firebase/app'\r\nimport \"firebase/auth\"\r\nimport firebaseConfig from './firebase.config';\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst Login = () => {\r\n    const [newUser, setNewUser] = useState(false);\r\n    const [user, setUser] = useState({\r\n        isSignedIn: false,\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        photo: ''\r\n    })\r\n    const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n    const fbProvider = new firebase.auth.FacebookAuthProvider();\r\n    const handleSignIn = () => {\r\n        firebase.auth().signInWithPopup(googleProvider)\r\n            .then(res => {\r\n                const { displayName, photoURL, email } = res.user;\r\n                const signedInUser = {\r\n                    isSignedIn: true,\r\n                    name: displayName,\r\n                    email: email,\r\n                    photo: photoURL\r\n                };\r\n                setUser(signedInUser);\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                console.log(err.message);\r\n            })\r\n    }\r\n\r\n    const handleFbSignIn = () => {\r\n        firebase.auth().signInWithPopup(fbProvider).then(function (result) {\r\n            var token = result.credential.accessToken;\r\n            var user = result.user;\r\n            console.log('fb user after sign in', user);\r\n        }).catch(function (error) {\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            console.log(errorCode, errorMessage)\r\n        });\r\n    }\r\n\r\n    const handleSignOut = () => {\r\n        firebase.auth().signOut()\r\n            .then(res => {\r\n                const signedOutUser = {\r\n                    isSignedIn: false,\r\n                    name: '',\r\n                    email: '',\r\n                    photo: '',\r\n                    error: '',\r\n                    success: false\r\n                }\r\n                setUser(signedOutUser);\r\n            }).catch(err => {\r\n                // An error happened.\r\n            });\r\n    }\r\n\r\n    const handleBlur = (e) => {\r\n        let isFieldValid = true;\r\n        if (e.target.name === 'email') {\r\n            isFieldValid = /\\S+@\\S+\\.\\S+/.test(e.target.value);\r\n        }\r\n        if (e.target.name === 'password') {\r\n            const isPasswordValid = e.target.value.length > 6;\r\n            const passwordHasNumber = /\\d{1}/.test(e.target.value);\r\n            isFieldValid = isPasswordValid && passwordHasNumber;\r\n        }\r\n        if (isFieldValid) {\r\n            const newUserInfo = { ...user };\r\n            newUserInfo[e.target.name] = e.target.value;\r\n            setUser(newUserInfo);\r\n        }\r\n    }\r\n    const handleSubmit = (e) => {\r\n        if (newUser && user.email && user.password) {\r\n            firebase.auth().createUserWithEmailAndPassword(user.email, user.password)\r\n                .then(res => {\r\n                    const newUserInfo = { ...user };\r\n                    newUserInfo.error = '';\r\n                    newUserInfo.success = true;\r\n                    setUser(newUserInfo);\r\n                    updateUserName(user.name);\r\n                })\r\n                .catch(error => {\r\n                    const newUserInfo = { ...user };\r\n                    newUserInfo.error = error.message;\r\n                    newUserInfo.success = false;\r\n                    setUser(newUserInfo);\r\n                });\r\n        }\r\n\r\n        if (!newUser && user.email && user.password) {\r\n            firebase.auth().signInWithEmailAndPassword(user.email, user.password)\r\n                .then(res => {\r\n                    const newUserInfo = { ...user };\r\n                    newUserInfo.error = '';\r\n                    newUserInfo.success = true;\r\n                    setUser(newUserInfo);\r\n                    console.log('sign in user info', res.user);\r\n                })\r\n                .catch(function (error) {\r\n                    const newUserInfo = { ...user };\r\n                    newUserInfo.error = error.message;\r\n                    newUserInfo.success = false;\r\n                    setUser(newUserInfo);\r\n                });\r\n        }\r\n\r\n        e.preventDefault();\r\n    }\r\n\r\n    const updateUserName = name => {\r\n        const user = firebase.auth().currentUser;\r\n\r\n        user.updateProfile({\r\n            displayName: name\r\n        }).then(function () {\r\n            console.log('user name updated successfully')\r\n        }).catch(function (error) {\r\n            console.log(error)\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            { user.isSignedIn ? <button onClick={handleSignOut}>Sign Out</button> :\r\n                <button onClick={handleSignIn}>Sign In</button>\r\n            }\r\n            <br />\r\n            <button onClick={handleFbSignIn}>Sign in using Facebook</button>\r\n            {\r\n                user.isSignedIn && <div>\r\n                    <p>Welcome, {user.name}!</p>\r\n                    <p>Your email: {user.email}</p>\r\n                    <img src={user.photo} alt=\"\" />\r\n                </div>\r\n            }\r\n\r\n            <h1>Our own Authentication</h1>\r\n            <input type=\"checkbox\" onChange={() => setNewUser(!newUser)} name=\"newUser\" id=\"\" />\r\n            <label htmlFor=\"newUser\">New User Sign up</label>\r\n            <form onSubmit={handleSubmit}>\r\n                {newUser && <input name=\"name\" type=\"text\" onBlur={handleBlur} placeholder=\"Your name\" />}\r\n                <br />\r\n                <input type=\"text\" name=\"email\" onBlur={handleBlur} placeholder=\"Your Email address\" required />\r\n                <br />\r\n                <input type=\"password\" name=\"password\" onBlur={handleBlur} placeholder=\"Your Password\" required />\r\n                <br />\r\n                <input type=\"submit\" value={newUser ? 'Sign up' : 'Sign in'} />\r\n            </form>\r\n            <p style={{ color: 'red' }}>{user.error}</p>\r\n            { user.success && <p style={{ color: 'green' }}>User {newUser ? 'created' : 'Logged In'} successfully</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}