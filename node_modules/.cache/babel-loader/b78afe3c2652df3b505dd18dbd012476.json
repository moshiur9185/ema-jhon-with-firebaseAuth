{"ast":null,"code":"var _jsxFileName = \"/home/moshiur/Desktop/Web Development/projects/ema-john-router/src/componets/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport firebaseConfig from \"./firebase.config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n} else {\n  firebase.app();\n}\n\nfunction Login() {\n  _s();\n\n  const [newUser, setNewUser] = useState(false);\n  const [user, setUser] = useState({\n    isSignedIn: false,\n    name: \"\",\n    email: '',\n    password: '',\n    photo: ''\n  });\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n\n  const handleSignIn = () => {\n    firebase.auth().signInWithPopup(googleProvider).then(res => {\n      const {\n        displayName,\n        photoURL,\n        email\n      } = res.user;\n      const singedInUser = {\n        isSignedIn: true,\n        name: displayName,\n        email: email,\n        photo: photoURL\n      };\n      setUser(singedInUser); // console.log(displayName, email, photoURL, )\n    }).catch(err => {\n      console.log(err);\n      console.log(err.message);\n    });\n  }; //facebook sign in\n\n\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\n\n  const handleFbSingUp = () => {\n    firebase.auth().signInWithPopup(fbProvider).then(res => {\n      //  @type {firebase.auth.OAuthCredential}\n      var credential = res.credential.accessToken;\n      var user = res.user;\n      console.log(user);\n    }).catch(error => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message; // The email of the user's account used.\n\n      var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n      var credential = error.credential; // ...\n    });\n  };\n\n  const handleSignOut = () => {\n    firebase.auth().signOut().then(res => {\n      const signedOutUser = {\n        isSignedIn: false,\n        name: '',\n        email: '',\n        photo: '',\n        success: false,\n        error: ''\n      };\n      setUser(signedOutUser);\n    }).catch(err => {});\n  };\n\n  const handleBlur = e => {\n    let isFieldValid = true;\n\n    if (e.target.name === 'email') {\n      isFieldValid = /\\S+@\\S+\\.\\S+/.test(e.target.value); // console.log(isFieldValid)\n    }\n\n    if (e.target.name === 'password') {\n      const isPasswordValid = e.target.value.length >= 6;\n      const passwordHasNumber = /\\d{1}/.test(e.target.value);\n      isFieldValid = isPasswordValid && passwordHasNumber; // console.log(isFieldValid)\n    } //valid check\n\n\n    if (isFieldValid) {\n      const newUserInfo = { ...user\n      };\n      newUserInfo[e.target.name] = e.target.value;\n      setUser(newUserInfo);\n    }\n  };\n\n  const handleSubmit = () => {// console.log(user.email, user.password);\n    // if(user.email && user.password){\n    //   console.log(\"submitting\");\n    // }\n    // e.preventDefault();\n  }; //submit Btn eventHandler\n\n\n  const handleClick = e => {\n    // console.log(user.email, user.password)\n    if (newUser && user.email && user.password) {\n      // console.log(\"submitting\")\n      firebase.auth().createUserWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        updateUserName(user.name);\n      }).catch(error => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n      });\n    } // Signed in for old user\n\n\n    if (!newUser && user.email && user.password) {\n      firebase.auth().signInWithEmailAndPassword(user.email, user.password).then(res => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        console.log('sign in user info', res.user);\n      }).catch(error => {\n        const newUserInfo = { ...user\n        };\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n      });\n    }\n\n    e.preventDefault();\n  }; //update user name\n\n\n  const updateUserName = name => {\n    const user = firebase.auth().currentUser;\n    user.updateProfile({\n      displayName: name\n    }).then(res => {\n      // Update successful.\\\n      console.log('Updated successfully');\n    }).catch(error => {\n      // An error happened.\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: [user.isSignedIn ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignOut,\n      children: \"Sign Out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 27\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignIn,\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleFbSingUp,\n      children: \"Sign in Facebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), user.isSignedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome \", user.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Email : \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: user.photo,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Our Own Athuntication\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      onChange: () => setNewUser(!newUser),\n      name: \"newUser\",\n      id: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"level\", {\n      htmlFor: \"newUser\",\n      children: \"New User Sign Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"from\", {\n      onSubmit: handleSubmit,\n      children: [newUser && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onBlur: handleBlur,\n        name: \"name\",\n        placeholder: \"Enter your name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        onBlur: handleBlur,\n        name: \"email\",\n        placeholder: \"Enter your email\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        onBlur: handleBlur,\n        name: \"password\",\n        placeholder: \"Enter your password\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleClick,\n      children: newUser ? 'Sign Up' : 'Sign In'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: user.error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }, this), user.success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green'\n      },\n      children: [\"User \", newUser ? 'created' : 'Logged In', \" successfully\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"1aH/y69dGMn6MGIl0wZEsx4PhEo=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/moshiur/Desktop/Web Development/projects/ema-john-router/src/componets/Login/Login.js"],"names":["React","useState","firebase","firebaseConfig","apps","length","initializeApp","app","Login","newUser","setNewUser","user","setUser","isSignedIn","name","email","password","photo","googleProvider","auth","GoogleAuthProvider","handleSignIn","signInWithPopup","then","res","displayName","photoURL","singedInUser","catch","err","console","log","message","fbProvider","FacebookAuthProvider","handleFbSingUp","credential","accessToken","error","errorCode","code","errorMessage","handleSignOut","signOut","signedOutUser","success","handleBlur","e","isFieldValid","target","test","value","isPasswordValid","passwordHasNumber","newUserInfo","handleSubmit","handleClick","createUserWithEmailAndPassword","updateUserName","signInWithEmailAndPassword","preventDefault","currentUser","updateProfile","textAlign","color"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport firebaseConfig from \"./firebase.config\";\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp(firebaseConfig);\r\n }else {\r\n    firebase.app(); \r\n }\r\n\r\nfunction Login() {\r\n  const [newUser, setNewUser] = useState(false);\r\n  const [user, setUser] = useState({\r\n    isSignedIn : false,\r\n    name : \"\",\r\n    email : '',\r\n    password : '',\r\n    photo : '',\r\n    \r\n  })\r\n\r\n\r\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n  const handleSignIn =()=>{\r\n    firebase.auth().signInWithPopup(googleProvider)\r\n    .then(res=>{\r\n      const {displayName, photoURL, email} =res.user;\r\n      const singedInUser = {\r\n        isSignedIn : true,\r\n        name : displayName,\r\n        email : email,\r\n        photo : photoURL\r\n      }\r\n      setUser(singedInUser);\r\n      // console.log(displayName, email, photoURL, )\r\n    })\r\n    .catch((err)=>{\r\n      console.log(err);\r\n      console.log(err.message)\r\n    })\r\n  }\r\n\r\n  //facebook sign in\r\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\r\n  const handleFbSingUp = () => {\r\n    firebase.auth().signInWithPopup(fbProvider)\r\n    .then(res => {\r\n      //  @type {firebase.auth.OAuthCredential}\r\n      var credential = res.credential.accessToken;\r\n      var user = res.user;\r\n      console.log(user);\r\n    })\r\n    .catch((error) => {\r\n      // Handle Errors here.\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n      // The email of the user's account used.\r\n      var email = error.email;\r\n      // The firebase.auth.AuthCredential type that was used.\r\n      var credential = error.credential;\r\n  \r\n      // ...\r\n    });\r\n   \r\n  }\r\n  \r\n  const handleSignOut =()=>{\r\n    firebase.auth().signOut()\r\n    .then(res =>{\r\n      const signedOutUser = {\r\n        isSignedIn : false,\r\n        name:'',\r\n        email:'',\r\n        photo: '',\r\n        success: false,\r\n        error: ''\r\n      }\r\n      setUser(signedOutUser);\r\n    })\r\n    .catch((err) =>{\r\n    })\r\n  }\r\n\r\n\r\n  const handleBlur =(e)=>{\r\n    let isFieldValid = true;\r\n    if(e.target.name === 'email'){\r\n      isFieldValid = /\\S+@\\S+\\.\\S+/.test(e.target.value)\r\n      // console.log(isFieldValid)\r\n    }\r\n    if(e.target.name === 'password'){\r\n      const isPasswordValid = e.target.value.length >= 6;\r\n      const passwordHasNumber =  /\\d{1}/.test(e.target.value)\r\n      isFieldValid = isPasswordValid && passwordHasNumber;\r\n      // console.log(isFieldValid)\r\n    }\r\n    //valid check\r\n    if(isFieldValid){\r\n      const newUserInfo = {...user};\r\n      newUserInfo[e.target.name] = e.target.value;\r\n      setUser(newUserInfo);\r\n    }\r\n  }\r\n\r\n\r\nconst handleSubmit = () => {\r\n  // console.log(user.email, user.password);\r\n  // if(user.email && user.password){\r\n  //   console.log(\"submitting\");\r\n  // }\r\n  // e.preventDefault();\r\n}\r\n\r\n//submit Btn eventHandler\r\nconst handleClick = (e)=>{\r\n  // console.log(user.email, user.password)\r\n  if(newUser && user.email && user.password){\r\n    // console.log(\"submitting\")\r\n    firebase.auth().createUserWithEmailAndPassword(user.email, user.password)\r\n      .then((res) => {\r\n        const newUserInfo = {...user};\r\n        newUserInfo.error = '';\r\n        newUserInfo.success = true;\r\n        setUser(newUserInfo);\r\n        updateUserName(user.name);\r\n      })\r\n      .catch((error) => { \r\n        const newUserInfo = {...user};\r\n        newUserInfo.error = error.message;\r\n        newUserInfo.success = false;\r\n        setUser(newUserInfo);\r\n      });\r\n  }\r\n// Signed in for old user\r\n  if(!newUser && user.email && user.password){\r\n    firebase.auth().signInWithEmailAndPassword(user.email, user.password)\r\n      .then((res) => {\r\n        const newUserInfo = {...user};\r\n        newUserInfo.error = '';\r\n        newUserInfo.success = true;\r\n        setUser(newUserInfo);\r\n        console.log( 'sign in user info', res.user);\r\n      })\r\n      .catch((error) => {\r\n        const newUserInfo = {...user};\r\n        newUserInfo.error = error.message;\r\n        newUserInfo.success = false;\r\n        setUser(newUserInfo);\r\n      });\r\n  }\r\n  e.preventDefault();\r\n}\r\n\r\n//update user name\r\nconst updateUserName = name => {\r\n  const user = firebase.auth().currentUser;\r\n\r\n    user.updateProfile({\r\n      displayName: name,\r\n    }).then(res => {\r\n      // Update successful.\\\r\n      console.log('Updated successfully')\r\n    }).catch(error=> {\r\n      // An error happened.\r\n      console.log(error)\r\n    });\r\n}\r\n\r\n\r\n  return (\r\n    <div style={{textAlign: 'center'}}>\r\n      {\r\n        user.isSignedIn ? <button onClick={handleSignOut}>Sign Out</button> :\r\n        <button onClick={handleSignIn}>Sign In</button>\r\n      }\r\n      <br/>\r\n      <button onClick={handleFbSingUp}>Sign in Facebook</button> \r\n      {\r\n        user.isSignedIn &&\r\n        <div>\r\n         <p>Welcome {user.name}</p>\r\n        <p>Email : {user.email}</p>\r\n        <img src={user.photo} alt=\"\"/>\r\n      </div>\r\n    }\r\n    <h1>Our Own Athuntication</h1>\r\n    \r\n    {/* check box */}\r\n    <input type=\"checkbox\" onChange={()=> setNewUser(!newUser)} name=\"newUser\" id=\"\"/>\r\n    <level htmlFor=\"newUser\">New User Sign Up</level>\r\n    <br/>\r\n    <from onSubmit={handleSubmit}>\r\n      {newUser && <input type=\"text\" onBlur={handleBlur} name=\"name\" placeholder=\"Enter your name\"/>}\r\n      <br/>\r\n      <input type=\"email\" onBlur={handleBlur} name=\"email\" placeholder=\"Enter your email\" required/>\r\n      <br/>\r\n      <input type=\"password\" onBlur={handleBlur} name=\"password\" placeholder=\"Enter your password\" required/>\r\n      <br/>\r\n      {/* <input type=\"submit\" value=\"Submit\"/> */}\r\n    </from>\r\n    <button onClick={handleClick}>{newUser ? 'Sign Up' : 'Sign In'}</button>\r\n    <p style={{color:'red'}}>{user.error}</p>\r\n    {\r\n      user.success && <p style={{color:'green'}}>User { newUser ? 'created' : 'Logged In' } successfully</p>\r\n    }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}