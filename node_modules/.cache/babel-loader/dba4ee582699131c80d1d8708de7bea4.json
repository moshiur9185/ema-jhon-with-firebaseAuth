{"ast":null,"code":"import React from 'react';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport firebaseConfig from \"./firebase.config\";\nexport const initializeLoginFremwork = () => {\n  if (!firebase.apps.length) {\n    firebase.initializeApp(firebaseConfig);\n  } else {\n    firebase.app();\n  }\n};\nexport const handleGoogleSignIn = () => {\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n  return firebase.auth().signInWithPopup(googleProvider).then(res => {\n    const {\n      displayName,\n      photoURL,\n      email\n    } = res.user;\n    const singedInUser = {\n      isSignedIn: true,\n      name: displayName,\n      email: email,\n      photo: photoURL\n    };\n    return singedInUser; // console.log(displayName, email, photoURL, )\n  }).catch(err => {\n    console.log(err);\n    console.log(err.message);\n  });\n}; // facebook login\n\nexport const handleFbSingUp = () => {\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\n  return firebase.auth().signInWithPopup(fbProvider).then(res => {\n    //  @type {firebase.auth.OAuthCredential}\n    var credential = res.credential.accessToken;\n    var user = res.user;\n    return user;\n    console.log(user);\n  }).catch(error => {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message; // The email of the user's account used.\n\n    var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n    var credential = error.credential; // ...\n  });\n};\nexport const handleSignOut = () => {\n  return firebase.auth().signOut().then(res => {\n    const signedOutUser = {\n      isSignedIn: false,\n      name: '',\n      email: '',\n      photo: '',\n      success: false,\n      error: ''\n    };\n    return signedOutUser;\n  }).catch(err => {});\n};\nexport const createUserWithEmailAndPassword = () => {\n  firebase.auth().createUserWithEmailAndPassword(user.email, user.password).then(res => {\n    const newUserInfo = { ...user\n    };\n    newUserInfo.error = '';\n    newUserInfo.success = true;\n    setUser(newUserInfo);\n    updateUserName(user.name);\n  }).catch(error => {\n    const newUserInfo = { ...user\n    };\n    newUserInfo.error = error.message;\n    newUserInfo.success = false;\n    setUser(newUserInfo);\n  });\n};\nexport const signInWithEmailAndPassword = () => {\n  firebase.auth().signInWithEmailAndPassword(user.email, user.password).then(res => {\n    const newUserInfo = { ...user\n    };\n    newUserInfo.error = '';\n    newUserInfo.success = true;\n    setUser(newUserInfo);\n    setLoggedInUser(newUserInfo);\n    history.replace(from);\n    console.log('sign in user info', res.user);\n  }).catch(error => {\n    const newUserInfo = { ...user\n    };\n    newUserInfo.error = error.message;\n    newUserInfo.success = false;\n    setUser(newUserInfo);\n  });\n};\n\nconst updateUserName = name => {\n  const user = firebase.auth().currentUser;\n  user.updateProfile({\n    displayName: name\n  }).then(res => {\n    // Update successful.\\\n    console.log('Updated successfully');\n  }).catch(error => {\n    // An error happened.\n    console.log(error);\n  });\n};","map":{"version":3,"sources":["/home/moshiur/Desktop/Web Development/projects/ema-john-router/src/componets/LoginManager/LoginManager.js"],"names":["React","firebase","firebaseConfig","initializeLoginFremwork","apps","length","initializeApp","app","handleGoogleSignIn","googleProvider","auth","GoogleAuthProvider","signInWithPopup","then","res","displayName","photoURL","email","user","singedInUser","isSignedIn","name","photo","catch","err","console","log","message","handleFbSingUp","fbProvider","FacebookAuthProvider","credential","accessToken","error","errorCode","code","errorMessage","handleSignOut","signOut","signedOutUser","success","createUserWithEmailAndPassword","password","newUserInfo","setUser","updateUserName","signInWithEmailAndPassword","setLoggedInUser","history","replace","from","currentUser","updateProfile"],"mappings":"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","sourcesContent":["import React from 'react';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport firebaseConfig from \"./firebase.config\";\n\nexport const initializeLoginFremwork = () => {\n    if (!firebase.apps.length) {\n        firebase.initializeApp(firebaseConfig);\n     }else {\n        firebase.app(); \n     }\n}\nexport const handleGoogleSignIn =()=>{\n    const googleProvider = new firebase.auth.GoogleAuthProvider();\n    return firebase.auth().signInWithPopup(googleProvider)\n    .then(res=>{\n      const {displayName, photoURL, email} =res.user;\n      const singedInUser = {\n        isSignedIn : true,\n        name : displayName,\n        email : email,\n        photo : photoURL\n      }\n      return singedInUser;\n      // console.log(displayName, email, photoURL, )\n    })\n    .catch((err)=>{\n      console.log(err);\n      console.log(err.message)\n    })\n  }\n\n// facebook login\n  export const handleFbSingUp = () => {\n    const fbProvider = new firebase.auth.FacebookAuthProvider();\n    return firebase.auth().signInWithPopup(fbProvider)\n    .then(res => {\n      //  @type {firebase.auth.OAuthCredential}\n      var credential = res.credential.accessToken;\n      var user = res.user;\n      return user;\n      console.log(user);\n    })\n    .catch((error) => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n  \n      // ...\n    });\n   \n  }\n  export const handleSignOut =()=>{\n    return firebase.auth().signOut()\n    .then(res =>{\n      const signedOutUser = {\n        isSignedIn : false,\n        name:'',\n        email:'',\n        photo: '',\n        success: false,\n        error: ''\n      }\n      return signedOutUser;\n    })\n    .catch((err) =>{\n    })\n  }\n\nexport const createUserWithEmailAndPassword = () => {\n    firebase.auth().createUserWithEmailAndPassword(user.email, user.password)\n      .then((res) => {\n        const newUserInfo = {...user};\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        updateUserName(user.name);\n      })\n      .catch((error) => { \n        const newUserInfo = {...user};\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n      });\n}\n\nexport const signInWithEmailAndPassword =()=>{\n    firebase.auth().signInWithEmailAndPassword(user.email, user.password)\n      .then((res) => {\n        const newUserInfo = {...user};\n        newUserInfo.error = '';\n        newUserInfo.success = true;\n        setUser(newUserInfo);\n        setLoggedInUser(newUserInfo);\n        history.replace(from);\n        console.log( 'sign in user info', res.user);\n      })\n      .catch((error) => {\n        const newUserInfo = {...user};\n        newUserInfo.error = error.message;\n        newUserInfo.success = false;\n        setUser(newUserInfo);\n      });\n}\nconst updateUserName = name => {\n    const user = firebase.auth().currentUser;\n  \n      user.updateProfile({\n        displayName: name,\n      }).then(res => {\n        // Update successful.\\\n        console.log('Updated successfully')\n      }).catch(error=> {\n        // An error happened.\n        console.log(error)\n      });\n  }"]},"metadata":{},"sourceType":"module"}